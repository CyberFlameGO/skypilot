resources:
  cpus: 16+
  cloud: gcp

workdir: .

file_mounts:
  /sky-map-backing-store:
    name: sky-map-backing-store
    persistent: True

setup: |
  pip install fastapi
  pip install uvicorn

run: |
  ls /sky-map-backing-store
  python3 sky/map/main.py --backing-store /sky-map-backing-store/store.db

service:
  port: 8081
  readiness_probe:
    path: /health
    initial_delay_seconds: 20
  replicas: 1
  controller_resources:
    cloud: gcp