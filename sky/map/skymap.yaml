resources:
  cpus: 2+
  cloud: gcp

workdir: .

file_mounts:
  /sky-map-backing-store:
    name: sky-map-backing-store
    source: ~/store
    store: gcs
    persistent: True
    mode: MOUNT

setup: |
  pip install fastapi
  pip install uvicorn

run: |
  ls ~/store
  python3 sky/map/main.py

service:
  port: 8081
  readiness_probe:
    path: /health
    initial_delay_seconds: 20
  replicas: 1