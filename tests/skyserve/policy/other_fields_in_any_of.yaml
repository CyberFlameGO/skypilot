# Dynamic on-demand fallback does not support other fields in any_of
# Expected output: ValueError: Require multiple resources to have the same fields except zones/regions/clouds.

service:
  readiness_probe: /health
  replica_policy:
    min_replicas: 2
    dynamic_on_demand_fallback: true

resources:
  ports: 8081
  any_of:
    - instance_type: Standard_D8s_v5
    - image_id: docker:ubuntu:latest
    - cpus: 256+
    - disk_size: 1024
    - memory: 512+
  use_spot: true

workdir: examples/serve/http_server

run: python3 server.py
