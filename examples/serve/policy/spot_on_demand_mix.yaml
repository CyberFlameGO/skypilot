# SkyServe YAML to launch a service with mixed spot and on-demand instances.
# The policy SpotOnDemandMix will maintain `extra_on_demand_replicas` number of on-demand instances, in addition to spot instances that autoscale from 1 to 3.

service:
  readiness_probe:
    path: /health
  replica_policy:
    min_replicas: 1
    max_replicas: 3
    num_overprovision: 1
    extra_on_demand_replicas: 1
    target_qps_per_replica: 1
    spot_policy: SpotOnDemandMix

resources:
  any_of:
  - zone: us-central1-a
  - region: us-east1
  ports: 8081
  cloud: gcp
  cpus: 2+

workdir: examples/serve/http_server

run: python3 server.py
