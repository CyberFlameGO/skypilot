# Example task using AMD GPUs.
# Runs rocm-smi to get GPU information.

# Make sure
# Your nodes are labelled correctly:
#   kubectl label node <node-name> skypilot.co/accelerator=mi210
# There's no nvidia runtime on your cluster:
#   kubectl delete runtimeclasses.node.k8s.io nvidia nvidia-experimental

resources:
  cloud: kubernetes
  image_id: docker:rocm/pytorch:rocm6.0.2_ubuntu22.04_py3.10_pytorch_2.1.2 # rocm/pytorch:latest does not work since it uses python 3.11, which fails with ray 2.4.0
  accelerators: MI210:1

run: |
  rocm-smi
